### CAP 原则

- consistency：一致性
- availability：可用性
- partition tolerance：分区容错性

eureka: AP (各个节点平等)

zookeeper: CP (故障选举期间服务可能会不可用)

eureka 可以应网络故障导致部分节点失去联系的情况，zookeeper 可能导致整个节点瘫痪



### Eureka 注册中心

注册中心



### Ribbon + RestTemplate 消费服务

通过微服务名称调用

客户端**负载均衡**工具 (连接超时，重试)

- 集中式：nginx，把访问请求通过某种策略转发至服务提供方
- 进程式：消费者从注册中心发现哪些服务可用，然后从中选出合适的





### Feign 消费服务

通过接口 加 注解 调用

默认实现了 Ribbon



### Hystrix 断路器



#### 服务熔断 (服务端配置)

在某个服务**超时或异常**之后，不会导致整体服务失败，避免级联故障

服务故障后，向调用方返回一个预期的可处理的相应，不是长时间的等待或抛出无法处理的异常，保证服务的调用方线程不会长时间阻塞

失败调用到一定阈值后，启动熔断机制



#### 服务降级 (客户端配置)

从整个网站的负载考虑，在高并发条件下，禁用一些访问少的服务(给一个默认的响应 `FallbackFactory`)



### Dashboard 监控

